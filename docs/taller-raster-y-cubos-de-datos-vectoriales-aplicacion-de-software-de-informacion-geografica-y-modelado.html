<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Taller RASTER Y CUBOS DE DATOS VECTORIALES: Aplicación de software de información geográfica y modelado | Seminário Latinoamericano: Instrumentos y metodologias para un observatório de Clima y su impacto en la salud humana</title>
  <meta name="description" content="Emisiones/Calidad del Aire /sf/stars/raster." />
  <meta name="generator" content="bookdown 0.13 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Taller RASTER Y CUBOS DE DATOS VECTORIALES: Aplicación de software de información geográfica y modelado | Seminário Latinoamericano: Instrumentos y metodologias para un observatório de Clima y su impacto en la salud humana" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Emisiones/Calidad del Aire /sf/stars/raster." />
  <meta name="github-repo" content="ibarraespinosa/UBA" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Taller RASTER Y CUBOS DE DATOS VECTORIALES: Aplicación de software de información geográfica y modelado | Seminário Latinoamericano: Instrumentos y metodologias para un observatório de Clima y su impacto en la salud humana" />
  
  <meta name="twitter:description" content="Emisiones/Calidad del Aire /sf/stars/raster." />
  

<meta name="author" content="Sergio Ibarra-Espinosa, Universidade de São Paulo, sergio.ibarra@usp.br, ibarraespinosa.github.io" />


<meta name="date" content="2019-09-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado.html"/>
<link rel="next" href="estudios-de-series-de-tiempo-para-asociar-salud-y-variables-ambientales.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Seminario CELFI UBA</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Curso de R, contaminacion atmosferica y mas</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#aprender-git"><i class="fa fa-check"></i>Aprender Git</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#clonar-este-contenido"><i class="fa fa-check"></i>Clonar este contenido</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Sistemas de informacion con datos de salud en Chile</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#encuesta-nacional-de-salud-ens"><i class="fa fa-check"></i><b>1.1</b> <span>Encuesta Nacional de Salud (ENS)</span></a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#departamento-de-estadisticas-e-informaciones-de-salud"><i class="fa fa-check"></i><b>1.2</b> <span>Departamento de Estadisticas e Informaciones de Salud</span></a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#epidemiologia"><i class="fa fa-check"></i><b>1.3</b> Epidemiologia</a></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#encuesta-de-caracterizacion-socioeconomica-casen"><i class="fa fa-check"></i><b>1.4</b> <span>Encuesta de caracterizacion socioeconomica (CASEN)</span></a></li>
<li class="chapter" data-level="1.5" data-path="intro.html"><a href="intro.html#estadisticas-generales"><i class="fa fa-check"></i><b>1.5</b> Estadisticas generales</a></li>
<li class="chapter" data-level="1.6" data-path="intro.html"><a href="intro.html#cepal-stat"><i class="fa fa-check"></i><b>1.6</b> CEPAL STAT</a></li>
<li class="chapter" data-level="1.7" data-path="intro.html"><a href="intro.html#banco-interamericano-de-desarrollo"><i class="fa fa-check"></i><b>1.7</b> Banco Interamericano de Desarrollo</a></li>
<li class="chapter" data-level="1.8" data-path="intro.html"><a href="intro.html#datos-de-contaminacion-atmosferica-y-meteorologia"><i class="fa fa-check"></i><b>1.8</b> Datos de contaminacion atmosferica y meteorologia</a></li>
<li class="chapter" data-level="1.9" data-path="intro.html"><a href="intro.html#algunos-exemplos-de-datos-de-series-de-tiempo"><i class="fa fa-check"></i><b>1.9</b> Algunos exemplos de datos de series de tiempo</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><i class="fa fa-check"></i><b>2</b> Impacto de las emisiones antropogénicas en la calidad del aire y clima</a><ul>
<li class="chapter" data-level="2.1" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html#contaminacion-atmosferica---introduccion"><i class="fa fa-check"></i><b>2.1</b> Contaminacion atmosferica - Introduccion</a><ul>
<li class="chapter" data-level="2.1.1" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html#el-desastre-de-londres-1952"><i class="fa fa-check"></i><b>2.1.1</b> El desastre de Londres 1952</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html#contaminantes-atmosfericos"><i class="fa fa-check"></i><b>2.2</b> Contaminantes atmosfericos</a><ul>
<li class="chapter" data-level="2.2.1" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html#ozono-o_3"><i class="fa fa-check"></i><b>2.2.1</b> Ozono <span class="math inline">\(O_3\)</span></a></li>
<li class="chapter" data-level="2.2.2" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html#especies-de-azufre"><i class="fa fa-check"></i><b>2.2.2</b> Especies de azufre</a></li>
<li class="chapter" data-level="2.2.3" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html#aerosoles"><i class="fa fa-check"></i><b>2.2.3</b> Aerosoles</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html#forzantes-climaticos-y-gases-de-efecto-invernadero"><i class="fa fa-check"></i><b>2.3</b> Forzantes climaticos y gases de efecto invernadero</a><ul>
<li class="chapter" data-level="2.3.1" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html#efectos-directos-e-indirectos-de-aerosoles"><i class="fa fa-check"></i><b>2.3.1</b> Efectos directos e indirectos de aerosoles</a></li>
<li class="chapter" data-level="2.3.2" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html#black-carbon---carbono-negro"><i class="fa fa-check"></i><b>2.3.2</b> Black Carbon - Carbono negro</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html#emisiones-y-sus-fuentes"><i class="fa fa-check"></i><b>2.4</b> Emisiones y sus fuentes</a><ul>
<li class="chapter" data-level="2.4.1" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html#tipos"><i class="fa fa-check"></i><b>2.4.1</b> Tipos</a></li>
<li class="chapter" data-level="2.4.2" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html#calidad-y-criterio"><i class="fa fa-check"></i><b>2.4.2</b> Calidad y criterio</a></li>
<li class="chapter" data-level="2.4.3" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html#dimensiones"><i class="fa fa-check"></i><b>2.4.3</b> Dimensiones</a></li>
<li class="chapter" data-level="2.4.4" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html#categorias-llave"><i class="fa fa-check"></i><b>2.4.4</b> Categorias llave</a></li>
<li class="chapter" data-level="2.4.5" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html#bottom-up-y-top-down"><i class="fa fa-check"></i><b>2.4.5</b> Bottom-up y top-down</a></li>
<li class="chapter" data-level="2.4.6" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html#ejemplo-de-factores-de-emision-real-time-gps"><i class="fa fa-check"></i><b>2.4.6</b> Ejemplo de factores de emision (real-time GPS)</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html#nuevos-modelos-de-emisiones-vein"><i class="fa fa-check"></i><b>2.5</b> Nuevos modelos de emisiones: VEIN</a></li>
<li class="chapter" data-level="2.6" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html#nuevos-datos-satelites-y-modelacion-inversa"><i class="fa fa-check"></i><b>2.6</b> Nuevos datos, satelites y modelacion inversa</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado.html"><a href="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado.html"><i class="fa fa-check"></i><b>3</b> Taller VECTORES: Aplicación de software de información geográfica y modelado</a><ul>
<li class="chapter" data-level="3.1" data-path="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado.html"><a href="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado.html#instalacion"><i class="fa fa-check"></i><b>3.1</b> Instalacion</a></li>
<li class="chapter" data-level="3.2" data-path="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado.html"><a href="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado.html#r-desde-excel-libreoffice-archivos-de-texto-etc."><i class="fa fa-check"></i><b>3.2</b> R desde Excel, libreoffice, archivos de texto, etc.</a><ul>
<li class="chapter" data-level="3.2.1" data-path="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado.html"><a href="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado.html#el-nino-y-la-nina"><i class="fa fa-check"></i><b>3.2.1</b> <span>El Niño y la Niña</span></a></li>
<li class="chapter" data-level="3.2.2" data-path="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado.html"><a href="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado.html#usando-base"><i class="fa fa-check"></i><b>3.2.2</b> Usando base</a></li>
<li class="chapter" data-level="3.2.3" data-path="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado.html"><a href="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado.html#usando-data.table-mi-favorito-junto-con-sf"><i class="fa fa-check"></i><b>3.2.3</b> Usando data.table (mi favorito junto con sf)</a></li>
<li class="chapter" data-level="3.2.4" data-path="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado.html"><a href="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado.html#summary"><i class="fa fa-check"></i><b>3.2.4</b> summary</a></li>
<li class="chapter" data-level="3.2.5" data-path="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado.html"><a href="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado.html#ploteando-datos-con-base"><i class="fa fa-check"></i><b>3.2.5</b> Ploteando datos con base</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado.html"><a href="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado.html#vectores"><i class="fa fa-check"></i><b>3.3</b> Vectores</a></li>
<li class="chapter" data-level="3.4" data-path="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado.html"><a href="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado.html#geoprocesamiento"><i class="fa fa-check"></i><b>3.4</b> Geoprocesamiento</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="taller-raster-y-cubos-de-datos-vectoriales-aplicacion-de-software-de-informacion-geografica-y-modelado.html"><a href="taller-raster-y-cubos-de-datos-vectoriales-aplicacion-de-software-de-informacion-geografica-y-modelado.html"><i class="fa fa-check"></i><b>4</b> Taller RASTER Y CUBOS DE DATOS VECTORIALES: Aplicación de software de información geográfica y modelado</a></li>
<li class="chapter" data-level="5" data-path="estudios-de-series-de-tiempo-para-asociar-salud-y-variables-ambientales.html"><a href="estudios-de-series-de-tiempo-para-asociar-salud-y-variables-ambientales.html"><i class="fa fa-check"></i><b>5</b> Estudios de series de tiempo para asociar salud y variables ambientales</a><ul>
<li class="chapter" data-level="5.1" data-path="estudios-de-series-de-tiempo-para-asociar-salud-y-variables-ambientales.html"><a href="estudios-de-series-de-tiempo-para-asociar-salud-y-variables-ambientales.html#distribucion"><i class="fa fa-check"></i><b>5.1</b> Distribucion</a></li>
<li class="chapter" data-level="5.2" data-path="estudios-de-series-de-tiempo-para-asociar-salud-y-variables-ambientales.html"><a href="estudios-de-series-de-tiempo-para-asociar-salud-y-variables-ambientales.html#efecto-de-la-contaminacion"><i class="fa fa-check"></i><b>5.2</b> Efecto de la contaminacion</a></li>
<li class="chapter" data-level="5.3" data-path="estudios-de-series-de-tiempo-para-asociar-salud-y-variables-ambientales.html"><a href="estudios-de-series-de-tiempo-para-asociar-salud-y-variables-ambientales.html#efecto-de-la-temperatura"><i class="fa fa-check"></i><b>5.3</b> Efecto de la temperatura</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/ibarraespinosa/UBA" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Seminário Latinoamericano: Instrumentos y metodologias para un observatório de Clima y su impacto en la salud humana</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="taller-raster-y-cubos-de-datos-vectoriales-aplicacion-de-software-de-informacion-geografica-y-modelado" class="section level1">
<h1><span class="header-section-number">Chapter 4</span> Taller RASTER Y CUBOS DE DATOS VECTORIALES: Aplicación de software de información geográfica y modelado</h1>
<p>gracias Amanda Rehbein &lt;3</p>
<p><a href="https://r-spatial.github.io/stars/">Raster</a> son informacion espaciales en una grilla espacial. En general, la informacion de las frillas tiene una distancia homogenea, Por ejemplo, vea las siguientes figuras:</p>
<p><img src="figs/cube1.png" /></p>
<p><img src="figs/cube2.png" /></p>
<p>Por ejemplo, cada banda podria representar un tiempo. Como se ve, estos ne realidad son cubos de datos de varias dimensiones, sin embargo, pueden existir grillas irregulares, como las que osn bien represnetadas con el paquete <a href="https://r-spatial.github.io/stars/articles/stars4.html">stars</a></p>
<p>Preparense, porque vamos a avanzar directamente en el fondo del mundo de los datos espacio/temporales grillados raster y stars</p>
<p><code>raster</code> es una clase y una libreria de R que representa datos en grillas, llamados raster
<code>stasr</code> es una clase y una libreria de R que representa datos en grillas, llamados tambien rasters.
Por lo tanto, <code>stars</code> y <code>raster</code> tienen conexiones para leer los datos en formato GDAL raster. Que quiere decir esto????</p>
<p>Quiere decir que, tal como GDAL lee vectores, tambien lee [raster]((<a href="https://gdal.org/drivers/raster/index.html" class="uri">https://gdal.org/drivers/raster/index.html</a>).: Coomopor ejemplo:</p>
<ul>
<li><a href="https://gdal.org/drivers/raster/aaigrid.html">ASCII</a></li>
<li><a href="https://gdal.org/drivers/raster/envi.html">ENVI</a></li>
<li><a href="https://gdal.org/drivers/raster/gtiff.html">GeoTIFF</a></li>
<li><a href="https://gdal.org/drivers/raster/palsar.html">JAXA PALSAR</a></li>
<li><a href="https://gdal.org/drivers/raster/netcdf.html">NetCDF</a></li>
<li><a href="https://gdal.org/drivers/raster/pdf.html">GeoSpatial PDF</a></li>
<li><a href="https://gdal.org/drivers/raster/r.html">R</a></li>
<li><a href="https://gdal.org/drivers/raster/rraster.html">R Raster</a></li>
<li><a href="https://gdal.org/drivers/raster/xyz.html">XYZ</a></li>
</ul>
<p>Vamos meterle manos a la obra, vamos a nadar en el mundo multidimensional de los raster y si no saben nadar aprenderan como los pajaros que aprenden ante la subita e inherente necesidada vital de sobrevivir.</p>
<p><a href="https://www.ecmwf.int/en/forecasts/datasets/reanalysis-datasets/era5">ERA5!</a></p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" data-line-number="1"><span class="kw">library</span>(stars)</a>
<a class="sourceLine" id="cb43-2" data-line-number="2">pcp_era5 &lt;-<span class="st"> </span><span class="kw">read_stars</span>(<span class="st">&quot;dados/pr_Amon_HadGEM2-ES_historical_r1i1p1_DJF_1985-2004.nc&quot;</span>)</a>
<a class="sourceLine" id="cb43-3" data-line-number="3"><span class="kw">names</span>(pcp_era5)</a>
<a class="sourceLine" id="cb43-4" data-line-number="4"><span class="kw">str</span>(pcp_era5)</a>
<a class="sourceLine" id="cb43-5" data-line-number="5"><span class="kw">head</span>(pcp_era5)</a></code></pre></div>
<p>brick es como literalmente un ladrillo considerndo usualmente la dimension tempral como un ladrillo.</p>
<p>como vemos, la funcion <code>str</code> entrega mucha informacion. Esta funcion no es comunmente usada, pero su archivo de documentacion es ?str</p>
<p><a href="https://www.ecmwf.int/en/forecasts/datasets/reanalysis-datasets/era5">ERA5</a>, investiguen!</p>
<p>Vamos a plotear estos datos!</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" data-line-number="1"><span class="kw">library</span>(stars)</a></code></pre></div>
<pre><code>## Loading required package: abind</code></pre>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" data-line-number="1"><span class="kw">library</span>(cptcity)</a>
<a class="sourceLine" id="cb46-2" data-line-number="2">pcp_era5 &lt;-<span class="st"> </span><span class="kw">read_stars</span>(<span class="st">&quot;dados/pr_Amon_HadGEM2-ES_historical_r1i1p1_DJF_1985-2004.nc&quot;</span>)</a>
<a class="sourceLine" id="cb46-3" data-line-number="3"><span class="kw">plot</span>(pcp_era5,</a>
<a class="sourceLine" id="cb46-4" data-line-number="4">    <span class="dt">col =</span> <span class="kw">lucky</span>(),</a>
<a class="sourceLine" id="cb46-5" data-line-number="5">     <span class="dt">axes =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>## Colour gradient: jjg_haxbyish_hx_120_110, number: 4143</code></pre>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-58-1.png" width="672" /></p>
<p>Ahora vamos voy a mostrar todo un script para hacer graficos y analizar datos climaticos usando la libreria <code>raster</code></p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" data-line-number="1"><span class="co"># ------------------------------------#</span></a>
<a class="sourceLine" id="cb48-2" data-line-number="2"><span class="co"># Precipitacion y temperatura medias  #</span></a>
<a class="sourceLine" id="cb48-3" data-line-number="3"><span class="co">#         Verano y invierno           #</span></a>
<a class="sourceLine" id="cb48-4" data-line-number="4"><span class="co">#       (very simple analysis)        #</span></a>
<a class="sourceLine" id="cb48-5" data-line-number="5"><span class="co"># ------------------------------------#</span></a>
<a class="sourceLine" id="cb48-6" data-line-number="6"></a>
<a class="sourceLine" id="cb48-7" data-line-number="7"><span class="kw">library</span>(raster)</a></code></pre></div>
<pre><code>## Loading required package: sp</code></pre>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" data-line-number="1"><span class="kw">library</span>(cptcity)</a>
<a class="sourceLine" id="cb50-2" data-line-number="2"></a>
<a class="sourceLine" id="cb50-3" data-line-number="3">path &lt;-<span class="st"> &quot;dados&quot;</span></a>
<a class="sourceLine" id="cb50-4" data-line-number="4"></a>
<a class="sourceLine" id="cb50-5" data-line-number="5"><span class="co"># DJF - VERANO: ####</span></a>
<a class="sourceLine" id="cb50-6" data-line-number="6"></a>
<a class="sourceLine" id="cb50-7" data-line-number="7"><span class="co"># Open the precipitation file:</span></a>
<a class="sourceLine" id="cb50-8" data-line-number="8">pcp_era5 &lt;-<span class="st"> </span><span class="kw">brick</span>(<span class="st">&quot;dados/r_ERA5_pcp_DJF_1985-2004.nc&quot;</span>)</a></code></pre></div>
<pre><code>## Loading required namespace: ncdf4</code></pre>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" data-line-number="1"><span class="co"># Print information and metadata:</span></a>
<a class="sourceLine" id="cb52-2" data-line-number="2">pcp_era5 <span class="co"># This file has 17 layers (years)</span></a></code></pre></div>
<pre><code>## class      : RasterBrick 
## dimensions : 145, 192, 27840, 21  (nrow, ncol, ncell, nlayers)
## resolution : 1.875, 1.25  (x, y)
## extent     : -0.9375, 359.0625, -90.625, 90.625  (xmin, xmax, ymin, ymax)
## crs        : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0 
## source     : /home/sergio/Documents/UBA/dados/r_ERA5_pcp_DJF_1985-2004.nc 
## names      : X1984.01.16.12.06.28, X1985.01.01.00.06.28, X1986.01.01.01.06.28, X1987.01.01.01.06.28, X1988.01.01.01.06.28, X1989.01.01.01.06.28, X1990.01.01.01.06.28, X1991.01.01.01.06.28, X1992.01.01.01.06.28, X1993.01.01.01.06.28, X1994.01.01.01.06.28, X1995.01.01.01.06.28, X1996.01.01.01.06.28, X1997.01.01.01.06.28, X1998.01.01.01.06.28, ... 
## Date/time  : 1984-01-16 12:06:28, 2005-12-01 01:06:28 (min, max)
## varname    : mtpr</code></pre>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" data-line-number="1"><span class="co"># Plot the 1st time/year:</span></a>
<a class="sourceLine" id="cb54-2" data-line-number="2"><span class="kw">plot</span>(pcp_era5[[<span class="dv">1</span>]]<span class="op">*</span><span class="dv">3600</span>)      <span class="co"># *3600 to obtain mm/h</span></a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-59-1.png" width="672" /></p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" data-line-number="1"><span class="co"># Calculate the mean:</span></a>
<a class="sourceLine" id="cb55-2" data-line-number="2">mean_pcp_era &lt;-<span class="st"> </span><span class="kw">mean</span>(pcp_era5<span class="op">*</span><span class="dv">3600</span>)</a>
<a class="sourceLine" id="cb55-3" data-line-number="3"></a>
<a class="sourceLine" id="cb55-4" data-line-number="4"><span class="co"># Opening CMIP5 data model: HadGEM2-ES\</span></a>
<a class="sourceLine" id="cb55-5" data-line-number="5">pcp_historical &lt;-<span class="st"> </span><span class="kw">brick</span>(<span class="st">&quot;dados/pr_Amon_HadGEM2-ES_historical_r1i1p1_DJF_1985-2004.nc&quot;</span>)</a>
<a class="sourceLine" id="cb55-6" data-line-number="6"><span class="kw">plot</span>(pcp_historical[[<span class="dv">1</span>]]<span class="op">*</span><span class="dv">3600</span>)</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-59-2.png" width="672" /></p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" data-line-number="1">mean_pcp_historical &lt;-<span class="st"> </span><span class="kw">mean</span>(pcp_historical<span class="op">*</span><span class="dv">3600</span>)</a>
<a class="sourceLine" id="cb56-2" data-line-number="2"><span class="kw">plot</span>(mean_pcp_historical[[<span class="dv">1</span>]]<span class="op">*</span><span class="dv">3600</span>,</a>
<a class="sourceLine" id="cb56-3" data-line-number="3">     <span class="dt">main =</span> <span class="st">&quot;HadGEM2-ES mean precipitation [mm/h] </span><span class="ch">\n</span><span class="st"> DJF (1985 - 2004)&quot;</span>)</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-59-3.png" width="672" /></p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" data-line-number="1">a &lt;-<span class="st"> </span><span class="kw">spplot</span>(mean_pcp_era, <span class="dt">interpolate =</span> T,</a>
<a class="sourceLine" id="cb57-2" data-line-number="2">            <span class="dt">main =</span> <span class="st">&quot;Observed Precipitation [mm/h] (ERA5) </span><span class="ch">\n</span><span class="st"> DJF (1985 - 2004)&quot;</span>,</a>
<a class="sourceLine" id="cb57-3" data-line-number="3">            <span class="dt">at =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">4</span>, <span class="fl">0.1</span>),</a>
<a class="sourceLine" id="cb57-4" data-line-number="4">            <span class="dt">col.regions =</span> <span class="kw">cpt</span>(<span class="st">&quot;ncl_precip2_17lev&quot;</span>))</a>
<a class="sourceLine" id="cb57-5" data-line-number="5">b &lt;-<span class="st"> </span><span class="kw">spplot</span>(mean_pcp_historical,</a>
<a class="sourceLine" id="cb57-6" data-line-number="6">            <span class="dt">main =</span> <span class="st">&quot;Simulated precipitation [mm/h] (HadGEM2-ES) </span><span class="ch">\n</span><span class="st"> DJF (1985 - 2004)&quot;</span>,</a>
<a class="sourceLine" id="cb57-7" data-line-number="7">            <span class="dt">at =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">4</span>, <span class="fl">0.1</span>),</a>
<a class="sourceLine" id="cb57-8" data-line-number="8">            <span class="dt">col.regions =</span> <span class="kw">cpt</span>(<span class="st">&quot;ncl_precip2_17lev&quot;</span>))</a>
<a class="sourceLine" id="cb57-9" data-line-number="9">gridExtra<span class="op">::</span><span class="kw">grid.arrange</span>(a, b, <span class="dt">ncol =</span> <span class="dv">2</span>)</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-59-4.png" width="672" /></p>
<p>Ahora vamos a ver la temperatura</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" data-line-number="1"><span class="co"># Temperature ####</span></a>
<a class="sourceLine" id="cb58-2" data-line-number="2">t2m_era5 &lt;-<span class="st"> </span><span class="kw">brick</span>(<span class="st">&quot;dados/r_ERA5_t2m_DJF_1985-2004.nc&quot;</span>)</a>
<a class="sourceLine" id="cb58-3" data-line-number="3">t2m_era5</a></code></pre></div>
<pre><code>## class      : RasterBrick 
## dimensions : 145, 192, 27840, 17  (nrow, ncol, ncell, nlayers)
## resolution : 1.875, 1.25  (x, y)
## extent     : -0.9375, 359.0625, -90.625, 90.625  (xmin, xmax, ymin, ymax)
## crs        : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0 
## source     : /home/sergio/Documents/UBA/dados/r_ERA5_t2m_DJF_1985-2004.nc 
## names      : X1986.01.01.01.06.28, X1987.01.01.01.06.28, X1988.01.01.01.06.28, X1989.01.01.01.06.28, X1990.01.01.01.06.28, X1991.01.01.01.06.28, X1992.01.01.01.06.28, X1993.01.01.01.06.28, X1994.01.01.01.06.28, X1995.01.01.01.06.28, X1996.01.01.01.06.28, X1997.01.01.01.06.28, X1998.01.01.01.06.28, X1999.01.01.01.06.28, X2000.01.01.01.06.28, ... 
## Date/time  : 1986-01-01 01:06:28, 2004-01-01 01:06:28 (min, max)
## varname    : t2m</code></pre>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" data-line-number="1"><span class="kw">plot</span>(t2m_era5[[<span class="dv">1</span>]] <span class="op">-</span><span class="st"> </span><span class="fl">273.15</span>)      <span class="co"># -273.15 to obtain ºC</span></a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-60-1.png" width="672" /></p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb61-1" data-line-number="1">mean_t2m_era &lt;-<span class="st"> </span><span class="kw">mean</span>(t2m_era5 <span class="fl">-273.15</span>)</a>
<a class="sourceLine" id="cb61-2" data-line-number="2"></a>
<a class="sourceLine" id="cb61-3" data-line-number="3">t2m_historical &lt;-<span class="st"> </span><span class="kw">brick</span>(<span class="st">&quot;dados/tas_Amon_HadGEM2-ES_historical_r1i1p1_DJF_1985-2004.nc&quot;</span>)</a>
<a class="sourceLine" id="cb61-4" data-line-number="4"><span class="kw">plot</span>(t2m_historical[[<span class="dv">1</span>]] <span class="op">-</span><span class="st"> </span><span class="fl">273.15</span>)</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-60-2.png" width="672" /></p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" data-line-number="1">mean_t2m_historical &lt;-<span class="st"> </span><span class="kw">mean</span>(t2m_historical <span class="op">-</span><span class="st"> </span><span class="fl">273.15</span>)</a>
<a class="sourceLine" id="cb62-2" data-line-number="2"></a>
<a class="sourceLine" id="cb62-3" data-line-number="3">c &lt;-<span class="st"> </span><span class="kw">spplot</span>(mean_t2m_era,</a>
<a class="sourceLine" id="cb62-4" data-line-number="4">            <span class="dt">main =</span> <span class="st">&quot;Observed temperature at 2m [ºC] (ERA5) </span><span class="ch">\n</span><span class="st"> DJF (1985 - 2004)&quot;</span>,</a>
<a class="sourceLine" id="cb62-5" data-line-number="5">            <span class="dt">at =</span> <span class="kw">seq</span>(<span class="op">-</span><span class="dv">40</span>, <span class="dv">40</span>, <span class="dv">1</span>),</a>
<a class="sourceLine" id="cb62-6" data-line-number="6">            <span class="dt">col.regions =</span> <span class="kw">cpt</span>(<span class="st">&quot;ncl_temp_diff_18lev&quot;</span>))</a>
<a class="sourceLine" id="cb62-7" data-line-number="7">d &lt;-<span class="st"> </span><span class="kw">spplot</span>(mean_t2m_historical,</a>
<a class="sourceLine" id="cb62-8" data-line-number="8">            <span class="dt">main =</span> <span class="st">&quot;Simulated temperature at 2m [ºC] (HadGEM2-ES) </span><span class="ch">\n</span><span class="st"> DJF (1985 - 2004)&quot;</span>,</a>
<a class="sourceLine" id="cb62-9" data-line-number="9">            <span class="dt">at =</span> <span class="kw">seq</span>(<span class="op">-</span><span class="dv">40</span>, <span class="dv">40</span>, <span class="dv">1</span>),</a>
<a class="sourceLine" id="cb62-10" data-line-number="10">            <span class="dt">col.regions =</span> <span class="kw">cpt</span>(<span class="st">&quot;ncl_temp_diff_18lev&quot;</span>))</a>
<a class="sourceLine" id="cb62-11" data-line-number="11">gridExtra<span class="op">::</span><span class="kw">grid.arrange</span>(c, d, <span class="dt">ncol =</span> <span class="dv">2</span>)</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-60-3.png" width="672" /></p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb63-1" data-line-number="1"><span class="co"># Calculate the bias (how model is different from the observation):</span></a>
<a class="sourceLine" id="cb63-2" data-line-number="2">pcp_bias &lt;-<span class="st"> </span>(mean_pcp_historical <span class="op">-</span><span class="st"> </span>mean_pcp_era)</a>
<a class="sourceLine" id="cb63-3" data-line-number="3">t2m_bias &lt;-<span class="st"> </span>(mean_t2m_historical <span class="op">-</span><span class="st"> </span>mean_t2m_era)</a>
<a class="sourceLine" id="cb63-4" data-line-number="4"></a>
<a class="sourceLine" id="cb63-5" data-line-number="5"></a>
<a class="sourceLine" id="cb63-6" data-line-number="6">f &lt;-<span class="st"> </span><span class="kw">spplot</span>(pcp_bias,</a>
<a class="sourceLine" id="cb63-7" data-line-number="7">            <span class="dt">main =</span> <span class="st">&quot;Precipitation bias [mm/h] </span><span class="ch">\n</span><span class="st"> DJF (1985 - 2004)&quot;</span>,</a>
<a class="sourceLine" id="cb63-8" data-line-number="8">            <span class="dt">at =</span> <span class="kw">seq</span>(<span class="op">-</span><span class="dv">3</span>, <span class="dv">3</span>, <span class="fl">0.1</span>),</a>
<a class="sourceLine" id="cb63-9" data-line-number="9">            <span class="dt">col.regions =</span> <span class="kw">cpt</span>(<span class="st">&quot;ncl_precip_diff_12lev&quot;</span>))</a>
<a class="sourceLine" id="cb63-10" data-line-number="10">g &lt;-<span class="st"> </span><span class="kw">spplot</span>(t2m_bias,</a>
<a class="sourceLine" id="cb63-11" data-line-number="11">            <span class="dt">main =</span> <span class="st">&quot;Temperature bias [ºC] </span><span class="ch">\n</span><span class="st"> DJF (1985 - 2004)&quot;</span>,</a>
<a class="sourceLine" id="cb63-12" data-line-number="12">            <span class="dt">at =</span> <span class="kw">seq</span>(<span class="op">-</span><span class="dv">15</span>, <span class="dv">15</span>, <span class="dv">1</span>),</a>
<a class="sourceLine" id="cb63-13" data-line-number="13">            <span class="dt">col.regions =</span> <span class="kw">cpt</span>(<span class="st">&quot;ncl_temp_diff_18lev&quot;</span>))</a>
<a class="sourceLine" id="cb63-14" data-line-number="14">gridExtra<span class="op">::</span><span class="kw">grid.arrange</span>(f, g, <span class="dt">ncol =</span> <span class="dv">2</span>)</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-60-4.png" width="672" /></p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" data-line-number="1">gridExtra<span class="op">::</span><span class="kw">grid.arrange</span>(a, b, f,</a>
<a class="sourceLine" id="cb64-2" data-line-number="2">                        c, d, g,  <span class="dt">ncol =</span> <span class="dv">3</span>)</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-60-5.png" width="672" /></p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb65-1" data-line-number="1"><span class="co"># JJA - invierno: ####</span></a>
<a class="sourceLine" id="cb65-2" data-line-number="2"><span class="co"># Try it by your self.</span></a></code></pre></div>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="estudios-de-series-de-tiempo-para-asociar-salud-y-variables-ambientales.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ibarraespinosa/UBA/edit/master/04-application.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
