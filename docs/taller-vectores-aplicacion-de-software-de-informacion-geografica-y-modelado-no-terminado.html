<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Taller VECTORES: Aplicación de software de información geográfica y modelado (no terminado) | Seminário Latinoamericano: Instrumentos y metodologias para un observatório de Clima y su impacto en la salud humana</title>
  <meta name="description" content="Emisiones/Calidad del Aire /sf/stars/raster." />
  <meta name="generator" content="bookdown 0.13 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Taller VECTORES: Aplicación de software de información geográfica y modelado (no terminado) | Seminário Latinoamericano: Instrumentos y metodologias para un observatório de Clima y su impacto en la salud humana" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Emisiones/Calidad del Aire /sf/stars/raster." />
  <meta name="github-repo" content="ibarraespinosa/UBA" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Taller VECTORES: Aplicación de software de información geográfica y modelado (no terminado) | Seminário Latinoamericano: Instrumentos y metodologias para un observatório de Clima y su impacto en la salud humana" />
  
  <meta name="twitter:description" content="Emisiones/Calidad del Aire /sf/stars/raster." />
  

<meta name="author" content="Sergio Ibarra-Espinosa, Universidade de São Paulo, sergio.ibarra@usp.br, ibarraespinosa.github.io" />


<meta name="date" content="2019-09-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"/>
<link rel="next" href="taller-raster-y-cubos-de-datos-vectoriales-aplicacion-de-software-de-informacion-geografica-y-modelado-no-terminado.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Seminario CELFI UBA</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Curso de R, contaminacion atmosferica y mas</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#aprender-git"><i class="fa fa-check"></i>Aprender Git</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#clonar-este-contenido"><i class="fa fa-check"></i>Clonar este contenido</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Sistemas de informacion con datos de salud en Chile</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#encuesta-nacional-de-salud-ens"><i class="fa fa-check"></i><b>1.1</b> <span>Encuesta Nacional de Salud (ENS)</span></a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#departamento-de-estadisticas-e-informaciones-de-salud"><i class="fa fa-check"></i><b>1.2</b> <span>Departamento de Estadisticas e Informaciones de Salud</span></a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#epidemiologia"><i class="fa fa-check"></i><b>1.3</b> Epidemiologia</a></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#encuesta-de-caracterizacion-socioeconomica-casen"><i class="fa fa-check"></i><b>1.4</b> <span>Encuesta de caracterizacion socioeconomica (CASEN)</span></a></li>
<li class="chapter" data-level="1.5" data-path="intro.html"><a href="intro.html#estadisticas-generales"><i class="fa fa-check"></i><b>1.5</b> Estadisticas generales</a></li>
<li class="chapter" data-level="1.6" data-path="intro.html"><a href="intro.html#cepal-stat"><i class="fa fa-check"></i><b>1.6</b> CEPAL STAT</a></li>
<li class="chapter" data-level="1.7" data-path="intro.html"><a href="intro.html#banco-interamericano-de-desarrollo"><i class="fa fa-check"></i><b>1.7</b> Banco Interamericano de Desarrollo</a></li>
<li class="chapter" data-level="1.8" data-path="intro.html"><a href="intro.html#datos-de-contaminacion-atmosferica-y-meteorologia"><i class="fa fa-check"></i><b>1.8</b> Datos de contaminacion atmosferica y meteorologia</a></li>
<li class="chapter" data-level="1.9" data-path="intro.html"><a href="intro.html#algunos-exemplos-de-datos-de-series-de-tiempo"><i class="fa fa-check"></i><b>1.9</b> Algunos exemplos de datos de series de tiempo</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><i class="fa fa-check"></i><b>2</b> Impacto de las emisiones antropogénicas en la calidad del aire y clima</a><ul>
<li class="chapter" data-level="2.1" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html#contaminacion-atmosferica---introduccion"><i class="fa fa-check"></i><b>2.1</b> Contaminacion atmosferica - Introduccion</a><ul>
<li class="chapter" data-level="2.1.1" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html#el-desastre-de-londres-1952"><i class="fa fa-check"></i><b>2.1.1</b> El desastre de Londres 1952</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html#contaminantes-atmosfericos"><i class="fa fa-check"></i><b>2.2</b> Contaminantes atmosfericos</a><ul>
<li class="chapter" data-level="2.2.1" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html#ozono-o_3"><i class="fa fa-check"></i><b>2.2.1</b> Ozono <span class="math inline">\(O_3\)</span></a></li>
<li class="chapter" data-level="2.2.2" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html#especies-de-azufre"><i class="fa fa-check"></i><b>2.2.2</b> Especies de azufre</a></li>
<li class="chapter" data-level="2.2.3" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html#aerosoles"><i class="fa fa-check"></i><b>2.2.3</b> Aerosoles</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html#forzantes-climaticos-y-gases-de-efecto-invernadero"><i class="fa fa-check"></i><b>2.3</b> Forzantes climaticos y gases de efecto invernadero</a><ul>
<li class="chapter" data-level="2.3.1" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html#efectos-directos-e-indirectos-de-aerosoles"><i class="fa fa-check"></i><b>2.3.1</b> Efectos directos e indirectos de aerosoles</a></li>
<li class="chapter" data-level="2.3.2" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html#black-carbon---carbono-negro"><i class="fa fa-check"></i><b>2.3.2</b> Black Carbon - Carbono negro</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html#emisiones-y-sus-fuentes"><i class="fa fa-check"></i><b>2.4</b> Emisiones y sus fuentes</a><ul>
<li class="chapter" data-level="2.4.1" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html#tipos"><i class="fa fa-check"></i><b>2.4.1</b> Tipos</a></li>
<li class="chapter" data-level="2.4.2" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html#calidad-y-criterio"><i class="fa fa-check"></i><b>2.4.2</b> Calidad y criterio</a></li>
<li class="chapter" data-level="2.4.3" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html#dimensiones"><i class="fa fa-check"></i><b>2.4.3</b> Dimensiones</a></li>
<li class="chapter" data-level="2.4.4" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html#categorias-llave"><i class="fa fa-check"></i><b>2.4.4</b> Categorias llave</a></li>
<li class="chapter" data-level="2.4.5" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html#bottom-up-y-top-down"><i class="fa fa-check"></i><b>2.4.5</b> Bottom-up y top-down</a></li>
<li class="chapter" data-level="2.4.6" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html#ejemplo-de-factores-de-emision-real-time-gps"><i class="fa fa-check"></i><b>2.4.6</b> Ejemplo de factores de emision (real-time GPS)</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html#nuevos-modelos-de-emisiones-vein"><i class="fa fa-check"></i><b>2.5</b> Nuevos modelos de emisiones: VEIN</a></li>
<li class="chapter" data-level="2.6" data-path="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html"><a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html#nuevos-datos-satelites-y-modelacion-inversa"><i class="fa fa-check"></i><b>2.6</b> Nuevos datos, satelites y modelacion inversa</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado-no-terminado.html"><a href="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado-no-terminado.html"><i class="fa fa-check"></i><b>3</b> Taller VECTORES: Aplicación de software de información geográfica y modelado (no terminado)</a><ul>
<li class="chapter" data-level="3.1" data-path="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado-no-terminado.html"><a href="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado-no-terminado.html#instalacion"><i class="fa fa-check"></i><b>3.1</b> Instalacion</a></li>
<li class="chapter" data-level="3.2" data-path="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado-no-terminado.html"><a href="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado-no-terminado.html#r-desde-excel-libreoffice-archivos-de-texto-etc."><i class="fa fa-check"></i><b>3.2</b> R desde Excel, libreoffice, archivos de texto, etc.</a><ul>
<li class="chapter" data-level="3.2.1" data-path="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado-no-terminado.html"><a href="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado-no-terminado.html#el-nino-y-la-nina"><i class="fa fa-check"></i><b>3.2.1</b> <span>El Niño y la Niña</span></a></li>
<li class="chapter" data-level="3.2.2" data-path="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado-no-terminado.html"><a href="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado-no-terminado.html#usando-base"><i class="fa fa-check"></i><b>3.2.2</b> Usando base</a></li>
<li class="chapter" data-level="3.2.3" data-path="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado-no-terminado.html"><a href="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado-no-terminado.html#usando-data.table-mi-favorito-junto-con-sf"><i class="fa fa-check"></i><b>3.2.3</b> Usando data.table (mi favorito junto con sf)</a></li>
<li class="chapter" data-level="3.2.4" data-path="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado-no-terminado.html"><a href="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado-no-terminado.html#summary"><i class="fa fa-check"></i><b>3.2.4</b> summary</a></li>
<li class="chapter" data-level="3.2.5" data-path="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado-no-terminado.html"><a href="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado-no-terminado.html#ploteando-datos-con-base"><i class="fa fa-check"></i><b>3.2.5</b> Ploteando datos con base</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado-no-terminado.html"><a href="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado-no-terminado.html#vectores"><i class="fa fa-check"></i><b>3.3</b> Vectores</a></li>
<li class="chapter" data-level="3.4" data-path="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado-no-terminado.html"><a href="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado-no-terminado.html#geoprocesamiento"><i class="fa fa-check"></i><b>3.4</b> Geoprocesamiento</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="taller-raster-y-cubos-de-datos-vectoriales-aplicacion-de-software-de-informacion-geografica-y-modelado-no-terminado.html"><a href="taller-raster-y-cubos-de-datos-vectoriales-aplicacion-de-software-de-informacion-geografica-y-modelado-no-terminado.html"><i class="fa fa-check"></i><b>4</b> Taller RASTER Y CUBOS DE DATOS VECTORIALES: Aplicación de software de información geográfica y modelado (no terminado)</a></li>
<li class="chapter" data-level="5" data-path="estudios-de-series-de-tiempo-para-asociar-salud-y-variables-ambientales.html"><a href="estudios-de-series-de-tiempo-para-asociar-salud-y-variables-ambientales.html"><i class="fa fa-check"></i><b>5</b> Estudios de series de tiempo para asociar salud y variables ambientales</a><ul>
<li class="chapter" data-level="5.1" data-path="estudios-de-series-de-tiempo-para-asociar-salud-y-variables-ambientales.html"><a href="estudios-de-series-de-tiempo-para-asociar-salud-y-variables-ambientales.html#distribucion"><i class="fa fa-check"></i><b>5.1</b> Distribucion</a></li>
<li class="chapter" data-level="5.2" data-path="estudios-de-series-de-tiempo-para-asociar-salud-y-variables-ambientales.html"><a href="estudios-de-series-de-tiempo-para-asociar-salud-y-variables-ambientales.html#efecto-de-la-contaminacion"><i class="fa fa-check"></i><b>5.2</b> Efecto de la contaminacion</a></li>
<li class="chapter" data-level="5.3" data-path="estudios-de-series-de-tiempo-para-asociar-salud-y-variables-ambientales.html"><a href="estudios-de-series-de-tiempo-para-asociar-salud-y-variables-ambientales.html#efecto-de-la-temperatura"><i class="fa fa-check"></i><b>5.3</b> Efecto de la temperatura</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/ibarraespinosa/UBA" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Seminário Latinoamericano: Instrumentos y metodologias para un observatório de Clima y su impacto en la salud humana</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="taller-vectores-aplicacion-de-software-de-informacion-geografica-y-modelado-no-terminado" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> Taller VECTORES: Aplicación de software de información geográfica y modelado (no terminado)</h1>
<p><strong>Nota: Existen diferentes recursos para aprender R, sf, stars y raster. Use Google, Baidu o duckduckgo</strong></p>
<ul>
<li>www.github.com/r-spatial/sf</li>
<li>www.github.com/r-spatial/stars</li>
<li>www.github.com/rspatial/raster</li>
<li><a href="https://bookdown.org/" class="uri">https://bookdown.org/</a></li>
<li><a href="https://geocompr.robinlovelace.net/" class="uri">https://geocompr.robinlovelace.net/</a></li>
<li><a href="https://www.datascienceatthecommandline.com/" class="uri">https://www.datascienceatthecommandline.com/</a></li>
<li><a href="https://bookdown.org/rdpeng/rprogdatascience/" class="uri">https://bookdown.org/rdpeng/rprogdatascience/</a></li>
</ul>
<p><strong>NOTA: SI ALGUNA VEZ TE PIERDES USANDO ALGUNA FUNCION DE R, ESCRIBE <code>?FUNCION</code></strong>
Por ejemplo, si tenemos dudas con la funcion <code>aggregate</code>, <code>plot</code>, <code>read.csv</code></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">?aggregate</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">?plot</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">?read.csv</a></code></pre></div>
<p><strong>NOTA: PARA COMENTAR, ESCRIBA #</strong></p>
<p>Por ejemplo,</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">?aggregate <span class="co">#importante! Esto abre la pagina del manual de la funcion aggregate</span></a></code></pre></div>
<div id="instalacion" class="section level2">
<h2><span class="header-section-number">3.1</span> Instalacion</h2>
<p>Por favor instale las siguientes librerias en R, copie y peque (cole) en R:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw">install.packages</span>(</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">  <span class="kw">c</span>(<span class="st">&quot;sf&quot;</span>, <span class="st">&quot;stars&quot;</span>, <span class="st">&quot;cptcity&quot;</span>, <span class="st">&quot;ggplot2&quot;</span>, <span class="st">&quot;raster&quot;</span>, <span class="st">&quot;ncdf4&quot;</span>, </a>
<a class="sourceLine" id="cb7-3" data-line-number="3">    <span class="st">&quot;RNetCDF&quot;</span>, <span class="st">&quot;maps&quot;</span>, <span class="st">&quot;data.table&quot;</span>, <span class="st">&quot;readxl&quot;</span>)</a>
<a class="sourceLine" id="cb7-4" data-line-number="4">)</a></code></pre></div>
<p>Para correr el ejemplo de stars con Sentinel 5P instale la sigueinte libreria (1 Gb)</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw">install.packages</span>(</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">  <span class="kw">c</span>(<span class="st">&quot;starsdata&quot;</span>)</a>
<a class="sourceLine" id="cb8-3" data-line-number="3">)</a></code></pre></div>
<p>Para realmente comenzar es necesario mencionar que R es un lenguaje de programacion estadistico libre (gratis y abierto) orientado a objeto escrito en C, con bindings directos para C++, C y Fortran.</p>
</div>
<div id="r-desde-excel-libreoffice-archivos-de-texto-etc." class="section level2">
<h2><span class="header-section-number">3.2</span> R desde Excel, libreoffice, archivos de texto, etc.</h2>
<p>A veces debemos o obtenemos datos en hojas de calculo (Libreoffice Calc o Microsoft Office Excel). Cuando este archivo es pequeño no hay problema, pero la realidad es que cada vez es mas frecuente contar con grandes bases de datos y trabajar con un programa de interface grafica se hace dificil. Una de las razones es que la interfaz grafica consume muchos recursos computacionales, que podrian ser usados para el procesamiento de informacion. Por lo tanto</p>
<div id="el-nino-y-la-nina" class="section level3">
<h3><span class="header-section-number">3.2.1</span> <a href="https://www.ncdc.noaa.gov/teleconnections/enso/indicators/sst/">El Niño y la Niña</a></h3>
<p>“El Niño (La Niña) is a phenomenon in the equatorial Pacific Ocean characterized by a five consecutive 3-month running mean of sea surface temperature (SST) anomalies in the Niño 3.4 region that is above (below) the threshold of +0.5°C (-0.5°C). This standard of measure is known as the Oceanic Niño Index (ONI).” <a href="https://www.ncdc.noaa.gov/teleconnections/enso/indicators/sst/">NOAA</a></p>
<p><strong>Vamos a leer la temperatura de la superficie del mar para calcular el indice ONI</strong></p>
<p><strong>do (5 min)</strong>
- Abra <a href="https://www.ncdc.noaa.gov/teleconnections/nao/data.csv">https://www.ncdc.noaa.gov/teleconnections/nao/data.csv</a>
- Como son los datos?
- Cual es la separacion de las columnas?</p>
</div>
<div id="usando-base" class="section level3">
<h3><span class="header-section-number">3.2.2</span> Usando base</h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">url &lt;-<span class="st"> &quot;http://www.cpc.ncep.noaa.gov/products/analysis_monitoring/ensostuff/detrend.nino34.ascii.txt&quot;</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="co"># Leyendo datos</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3">oni =<span class="st"> </span><span class="kw">read.table</span>(url, <span class="dt">h =</span> T)</a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="co"># construyendo la variable de fecha / data</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5">oni<span class="op">$</span>Date &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="kw">paste0</span>(oni<span class="op">$</span>YR, <span class="kw">ifelse</span>(<span class="kw">nchar</span>(oni<span class="op">$</span>MON) <span class="op">&lt;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="st">                                            </span><span class="dv">2</span>, <span class="kw">paste0</span>(<span class="dv">0</span>, oni<span class="op">$</span>MON), oni<span class="op">$</span>MON), <span class="st">&quot;01&quot;</span>), <span class="dt">format =</span> <span class="st">&quot;%Y%m%d&quot;</span>)</a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="co"># Extrayendo el año</span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8">oni<span class="op">$</span>Year &lt;-<span class="st"> </span><span class="kw">as.integer</span>(<span class="kw">strftime</span>(oni<span class="op">$</span>Date, <span class="st">&quot;%Y&quot;</span>))</a>
<a class="sourceLine" id="cb9-9" data-line-number="9"><span class="co"># Extrayendo el mes</span></a>
<a class="sourceLine" id="cb9-10" data-line-number="10">oni<span class="op">$</span>Month &lt;-<span class="st"> </span><span class="kw">as.integer</span>(<span class="kw">strftime</span>(oni<span class="op">$</span>Date, <span class="st">&quot;%m&quot;</span>))</a>
<a class="sourceLine" id="cb9-11" data-line-number="11"><span class="co"># Definiendo la funcion de media movil</span></a>
<a class="sourceLine" id="cb9-12" data-line-number="12">ma &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">n =</span> <span class="dv">3</span>) {</a>
<a class="sourceLine" id="cb9-13" data-line-number="13">  stats<span class="op">::</span><span class="kw">filter</span>(x, <span class="kw">rep</span>(<span class="dv">1</span><span class="op">/</span>n, n), <span class="dt">sides =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb9-14" data-line-number="14">}</a>
<a class="sourceLine" id="cb9-15" data-line-number="15"><span class="co"># Calculando la media movil</span></a>
<a class="sourceLine" id="cb9-16" data-line-number="16">oni<span class="op">$</span>ONI &lt;-<span class="st"> </span><span class="kw">ma</span>(oni<span class="op">$</span>ANOM, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb9-17" data-line-number="17"><span class="co"># Seleccionando las columnas de interes</span></a>
<a class="sourceLine" id="cb9-18" data-line-number="18">oni &lt;-<span class="st"> </span>oni[, <span class="kw">c</span>(<span class="st">&quot;Date&quot;</span>, <span class="st">&quot;Year&quot;</span>, <span class="st">&quot;Month&quot;</span>, <span class="st">&quot;ONI&quot;</span>)]</a>
<a class="sourceLine" id="cb9-19" data-line-number="19"><span class="co"># mostrando las primeras 6 observaciones de cada columna</span></a>
<a class="sourceLine" id="cb9-20" data-line-number="20"><span class="kw">head</span>(oni)</a></code></pre></div>
<pre><code>##         Date Year Month       ONI
## 1 1950-01-01 1950     1        NA
## 2 1950-02-01 1950     2 -1.336667
## 3 1950-03-01 1950     3 -1.166667
## 4 1950-04-01 1950     4 -1.183333
## 5 1950-05-01 1950     5 -1.073333
## 6 1950-06-01 1950     6 -0.850000</code></pre>
</div>
<div id="usando-data.table-mi-favorito-junto-con-sf" class="section level3">
<h3><span class="header-section-number">3.2.3</span> Usando data.table (mi favorito junto con sf)</h3>
<p>data.table es mas rapido que python, julia y spark</p>
<p><strong><a href="https://h2oai.github.io/db-benchmark/" class="uri">https://h2oai.github.io/db-benchmark/</a></strong></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw">library</span>(data.table)</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="co"># Leyendo datos</span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3">oni =<span class="st"> </span><span class="kw">fread</span>(url, <span class="dt">h =</span> T)</a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="co"># construyendo la variable de fecha / data</span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5">oni<span class="op">$</span>Date &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="kw">paste0</span>(oni<span class="op">$</span>YR, <span class="kw">ifelse</span>(<span class="kw">nchar</span>(oni<span class="op">$</span>MON) <span class="op">&lt;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-6" data-line-number="6"><span class="st">                                            </span><span class="dv">2</span>, <span class="kw">paste0</span>(<span class="dv">0</span>, oni<span class="op">$</span>MON), oni<span class="op">$</span>MON), <span class="st">&quot;01&quot;</span>), <span class="dt">format =</span> <span class="st">&quot;%Y%m%d&quot;</span>)</a>
<a class="sourceLine" id="cb11-7" data-line-number="7"><span class="co"># Extrayendo el año</span></a>
<a class="sourceLine" id="cb11-8" data-line-number="8">oni<span class="op">$</span>Year &lt;-<span class="st"> </span><span class="kw">as.integer</span>(<span class="kw">strftime</span>(oni<span class="op">$</span>Date, <span class="st">&quot;%Y&quot;</span>))</a>
<a class="sourceLine" id="cb11-9" data-line-number="9"><span class="co"># Extrayendo el mes</span></a>
<a class="sourceLine" id="cb11-10" data-line-number="10">oni<span class="op">$</span>Month &lt;-<span class="st"> </span><span class="kw">as.integer</span>(<span class="kw">strftime</span>(oni<span class="op">$</span>Date, <span class="st">&quot;%m&quot;</span>))</a>
<a class="sourceLine" id="cb11-11" data-line-number="11"><span class="co"># Definiendo la funcion de media movil</span></a>
<a class="sourceLine" id="cb11-12" data-line-number="12">ma &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">n =</span> <span class="dv">3</span>) {</a>
<a class="sourceLine" id="cb11-13" data-line-number="13">  stats<span class="op">::</span><span class="kw">filter</span>(x, <span class="kw">rep</span>(<span class="dv">1</span><span class="op">/</span>n, n), <span class="dt">sides =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb11-14" data-line-number="14">}</a>
<a class="sourceLine" id="cb11-15" data-line-number="15"><span class="co"># Calculando la media movil</span></a>
<a class="sourceLine" id="cb11-16" data-line-number="16">oni<span class="op">$</span>ONI &lt;-<span class="st"> </span><span class="kw">ma</span>(oni<span class="op">$</span>ANOM, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb11-17" data-line-number="17"><span class="co"># Seleccionando las columnas de interes</span></a>
<a class="sourceLine" id="cb11-18" data-line-number="18">oni &lt;-<span class="st"> </span>oni[, <span class="kw">c</span>(<span class="st">&quot;Date&quot;</span>, <span class="st">&quot;Year&quot;</span>, <span class="st">&quot;Month&quot;</span>, <span class="st">&quot;ONI&quot;</span>)]</a>
<a class="sourceLine" id="cb11-19" data-line-number="19"><span class="co"># mostrando las primeras 6 observaciones de cada columna</span></a>
<a class="sourceLine" id="cb11-20" data-line-number="20">oni</a>
<a class="sourceLine" id="cb11-21" data-line-number="21"><span class="kw">class</span>(oni)</a></code></pre></div>
<p>Otras librerias para leer datos tabulares (planihas - spreadsheets):</p>
<ul>
<li><a href="https://readxl.tidyverse.org/">readxl</a></li>
<li><a href="https://readr.tidyverse.org/">readr</a></li>
</ul>
</div>
<div id="summary" class="section level3">
<h3><span class="header-section-number">3.2.4</span> summary</h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw">summary</span>(oni)</a></code></pre></div>
<pre><code>##       Date                 Year          Month             ONI           
##  Min.   :1950-01-01   Min.   :1950   Min.   : 1.000   Min.   :-2.033333  
##  1st Qu.:1967-05-24   1st Qu.:1967   1st Qu.: 3.000   1st Qu.:-0.536667  
##  Median :1984-10-16   Median :1984   Median : 6.000   Median :-0.003333  
##  Mean   :1984-10-15   Mean   :1984   Mean   : 6.481   Mean   : 0.032758  
##  3rd Qu.:2002-03-08   3rd Qu.:2002   3rd Qu.: 9.000   3rd Qu.: 0.560833  
##  Max.   :2019-08-01   Max.   :2019   Max.   :12.000   Max.   : 2.643333  
##                                                       NA&#39;s   :2</code></pre>
</div>
<div id="ploteando-datos-con-base" class="section level3">
<h3><span class="header-section-number">3.2.5</span> Ploteando datos con base</h3>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">?plot</a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="kw">hist</span>(oni<span class="op">$</span>ONI, </a>
<a class="sourceLine" id="cb14-3" data-line-number="3">     <span class="dt">main =</span> <span class="st">&quot;Hitograma ONI&quot;</span>)</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-40-1.png" width="672" /></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw">boxplot</span>(oni<span class="op">$</span>ONI, </a>
<a class="sourceLine" id="cb15-2" data-line-number="2">        <span class="dt">main =</span> <span class="st">&quot;Boxplot de ONI&quot;</span>)</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-40-2.png" width="672" /></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">?boxplot</a></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb17-2" data-line-number="2"><span class="kw">library</span>(cptcity)</a>
<a class="sourceLine" id="cb17-3" data-line-number="3"><span class="kw">ggplot</span>(oni, </a>
<a class="sourceLine" id="cb17-4" data-line-number="4">       <span class="kw">aes</span>(<span class="dt">x =</span> Date, <span class="dt">y =</span> ONI,<span class="dt">colour =</span> ONI)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">size =</span> <span class="dv">2</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb17-6" data-line-number="6"><span class="kw">scale_colour_gradientn</span>(<span class="dt">colours =</span> <span class="kw">rev</span>(<span class="kw">cpt</span>(<span class="kw">find_cpt</span>(<span class="st">&quot;cb_div_RdB&quot;</span>)[<span class="dv">2</span>])), </a>
<a class="sourceLine" id="cb17-7" data-line-number="7">                       <span class="dt">limit =</span> <span class="kw">c</span>(<span class="op">-</span><span class="fl">2.7</span>, <span class="fl">2.7</span>))</a></code></pre></div>
<pre><code>## Don&#39;t know how to automatically pick scale for object of type ts. Defaulting to continuous.</code></pre>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-41-1.png" width="672" /></p>
</div>
</div>
<div id="vectores" class="section level2">
<h2><span class="header-section-number">3.3</span> Vectores</h2>
<p><a href="https://gdal.org/">GDAL</a> es la libreria de abstraccion de datos espaciales. Permite leer diferentes tipos de datos de tipo <a href="https://gdal.org/drivers/vector/index.html">vectores</a> y [raster](<a href="https://gdal.org/drivers/raster/index.html" class="uri">https://gdal.org/drivers/raster/index.html</a>. Algunos formatos de vectores:</p>
<ul>
<li><a href="https://gdal.org/drivers/vector/shapefile.html">ESRI Shapefile</a></li>
<li><a href="https://gdal.org/drivers/vector/eeda.html">Google Earth Engine Data API</a></li>
<li><a href="https://gdal.org/drivers/vector/geojson.html">GeoJSON</a> para html</li>
<li><a href="https://gdal.org/drivers/vector/gpkg.html">GeoPackage</a> que es el nuevo formato estandard para la representacion de datos espaciales. Ver <a href="https://en.wikipedia.org/wiki/GeoPackage">aqui</a>. Nuevo estandard ISO (puntos, areas, lineas, volume, etc) <a href="https://en.wikipedia.org/wiki/GeoPackage">GeoPackage</a>, creado por la <a href="https://www.opengeospatial.org/standards/geopackage">Open Geospatial Consortium</a>, es un formato abierto y no propietario de datos espaciales</li>
</ul>
<p><a href="https://github.com/r-spatial/sf">sf</a> significa Spatial Features y es una libreria con interface para las librerias GDAL, GEOS y PROJ que te premite trabajar con datos espaciales de una forma muy parecida que con una hoja de calculo normal.
Como sf esta enlazada con GDAL, permite leer todos los formatos de vector de GDAL direcamente en R.</p>
<p><strong>Vamos a leer datos de Argentina en formato GeoJSON</strong></p>
<p><strong>…</strong></p>
<p><strong>Es demasiado OBVIO que podemos leer datos shapefile .shp, por eso para cambiar un poco vamos a leer GeoJSON</strong></p>
<p>datos bajados de <a href="http://www.ign.gob.ar/NuestrasActividades/InformacionGeoespacial/CapasSIG">IGN</a></p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="kw">library</span>(sf)</a></code></pre></div>
<pre><code>## Linking to GEOS 3.7.1, GDAL 2.4.0, PROJ 5.2.0</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">read_sf</span>(<span class="st">&quot;dados/provincia.json&quot;</span>)</a>
<a class="sourceLine" id="cb21-2" data-line-number="2"><span class="kw">head</span>(df)</a></code></pre></div>
<pre><code>## Simple feature collection with 6 features and 8 fields
## geometry type:  MULTIPOLYGON
## dimension:      XYZ
## bbox:           xmin: -71.96569 ymin: -41.10059 xmax: -58.33515 ymax: -29.50042
## epsg (SRID):    4326
## proj4string:    +proj=longlat +datum=WGS84 +no_defs
## # A tibble: 6 x 9
##   entidad objeto fna   gna   nam   in1   fdc   sag  
##     &lt;int&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
## 1       0 Provi… Ciud… Ciud… Ciud… 02    Geog… IGN  
## 2       0 Provi… Prov… Prov… Neuq… 58    Geog… IGN  
## 3       0 Provi… Prov… Prov… La P… 42    Geog… IGN  
## 4       0 Provi… Prov… Prov… Mend… 50    Geog… IGN  
## 5       0 Provi… Prov… Prov… San … 74    Geog… IGN  
## 6       0 Provi… Prov… Prov… Córd… 14    Geog… IGN  
## # … with 1 more variable: geometry &lt;MULTIPOLYGON [°]&gt;</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="kw">names</span>(df)</a></code></pre></div>
<pre><code>## [1] &quot;entidad&quot;  &quot;objeto&quot;   &quot;fna&quot;      &quot;gna&quot;      &quot;nam&quot;      &quot;in1&quot;     
## [7] &quot;fdc&quot;      &quot;sag&quot;      &quot;geometry&quot;</code></pre>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="kw">plot</span>(df[<span class="st">&quot;geometry&quot;</span>], </a>
<a class="sourceLine" id="cb25-2" data-line-number="2">     <span class="dt">main =</span> <span class="st">&quot;Provincias de Argentina&quot;</span>,</a>
<a class="sourceLine" id="cb25-3" data-line-number="3">     <span class="dt">axes =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-42-1.png" width="480" /></p>
<p>Podemos seleccionar columnas y lineas igual a la forma que lo hicimos anteriormente, y ploteamos estos dados.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1"><span class="kw">head</span>(df)</a></code></pre></div>
<pre><code>## Simple feature collection with 6 features and 8 fields
## geometry type:  MULTIPOLYGON
## dimension:      XYZ
## bbox:           xmin: -71.96569 ymin: -41.10059 xmax: -58.33515 ymax: -29.50042
## epsg (SRID):    4326
## proj4string:    +proj=longlat +datum=WGS84 +no_defs
## # A tibble: 6 x 9
##   entidad objeto fna   gna   nam   in1   fdc   sag  
##     &lt;int&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
## 1       0 Provi… Ciud… Ciud… Ciud… 02    Geog… IGN  
## 2       0 Provi… Prov… Prov… Neuq… 58    Geog… IGN  
## 3       0 Provi… Prov… Prov… La P… 42    Geog… IGN  
## 4       0 Provi… Prov… Prov… Mend… 50    Geog… IGN  
## 5       0 Provi… Prov… Prov… San … 74    Geog… IGN  
## 6       0 Provi… Prov… Prov… Córd… 14    Geog… IGN  
## # … with 1 more variable: geometry &lt;MULTIPOLYGON [°]&gt;</code></pre>
<p>Vemos muchos datos, pero vamos a ver los datos unios por departamento. No estoy mostrando aqui pues son 435, pero ya se que vamos a seleccionar “Departamento Belgrano”</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1"><span class="kw">unique</span>(df<span class="op">$</span>fna)</a></code></pre></div>
<pre><code>##  [1] &quot;Ciudad Autónoma de Buenos Aires&quot;                                   
##  [2] &quot;Provincia del Neuquén&quot;                                             
##  [3] &quot;Provincia de La Pampa&quot;                                             
##  [4] &quot;Provincia de Mendoza&quot;                                              
##  [5] &quot;Provincia de San Luis&quot;                                             
##  [6] &quot;Provincia de Córdoba&quot;                                              
##  [7] &quot;Provincia de Santa Fe&quot;                                             
##  [8] &quot;Provincia de Entre Ríos&quot;                                           
##  [9] &quot;Provincia de San Juan&quot;                                             
## [10] &quot;Provincia de La Rioja&quot;                                             
## [11] &quot;Provincia de Catamarca&quot;                                            
## [12] &quot;Provincia de Tucumán&quot;                                              
## [13] &quot;Provincia de Jujuy&quot;                                                
## [14] &quot;Provincia del Chaco&quot;                                               
## [15] &quot;Provincia de Formosa&quot;                                              
## [16] &quot;Provincia de Santiago del Estero&quot;                                  
## [17] &quot;Provincia de Tierra del Fuego, Antártida e Islas del Atlántico Sur&quot;
## [18] &quot;Provincia de Santa Cruz&quot;                                           
## [19] &quot;Provincia del Chubut&quot;                                              
## [20] &quot;Provincia de Río Negro&quot;                                            
## [21] &quot;Provincia de Buenos Aires&quot;                                         
## [22] &quot;Provincia de Corrientes&quot;                                           
## [23] &quot;Provincia de Misiones&quot;                                             
## [24] &quot;Provincia de Salta&quot;</code></pre>
<p>La provincia 17 tiene un nombre muy largo, lo cambiamos asi:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1">df<span class="op">$</span>fna[<span class="dv">17</span>] &lt;-<span class="st"> &quot;Provincia Antartida&quot;</span></a></code></pre></div>
<p>De todas maneras, el campo <code>fna</code> tiene muchas veces la pabra “Provincia”, camos a eliminarla.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1">df<span class="op">$</span>fna &lt;-<span class="st"> </span><span class="kw">gsub</span>(<span class="dt">pattern =</span> <span class="st">&quot;Provincia &quot;</span>, <span class="dt">replacement =</span> <span class="st">&quot;&quot;</span>, <span class="dt">x =</span> df<span class="op">$</span>fna)</a></code></pre></div>
<p>La siguiente linea de codigo es muy barbara / da hora / cool / la raja. Corran!</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1"><span class="kw">library</span>(mapview)</a>
<a class="sourceLine" id="cb32-2" data-line-number="2"><span class="kw">mapview</span>(df, <span class="dt">zcol =</span> <span class="st">&quot;fna&quot;</span>, <span class="dt">legend =</span> T, <span class="dt">alpha =</span> <span class="fl">0.8</span>)</a></code></pre></div>
<p><strong>Ahora vamos a seleccionar Buenos Aires</strong></p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1"><span class="kw">plot</span>(df[df<span class="op">$</span>fna <span class="op">==</span><span class="st"> </span><span class="kw">unique</span>(df<span class="op">$</span>fna)[<span class="dv">1</span>], <span class="st">&quot;entidad&quot;</span>], </a>
<a class="sourceLine" id="cb33-2" data-line-number="2">     <span class="dt">axes =</span> T,</a>
<a class="sourceLine" id="cb33-3" data-line-number="3">     <span class="dt">main =</span> <span class="kw">unique</span>(df<span class="op">$</span>fna)[<span class="dv">1</span>])</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-48-1.png" width="672" /></p>
<p>Ahora, vamos a extraer los centroids de cada poligono</p>
<p><strong>Recuerda, si tienes dudas de alguna funcion, clica ?FUNCION, por ejemplo, ?st_centroid</strong></p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1">cent &lt;-<span class="st"> </span><span class="kw">st_centroid</span>(df)</a></code></pre></div>
<p>El warning se debe a que los datos que tenemos estan en latitud y longitud, y por lo visto, tenemos un dato con limites que no son correctos. Me parece que es la Antartida, debido se ve demasiado grande. Vamos a sacarla y ver como da</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1">cent &lt;-<span class="st"> </span><span class="kw">st_centroid</span>(df[df<span class="op">$</span>fna <span class="op">!=</span><span class="st"> &quot;Antartida&quot;</span>, ])</a></code></pre></div>
<p>Ahora vemos que tenemos un warning diferente. En este caso, st_centroid nos avisa que los geograficos son constantes, pero como sabemos, la tierra es un elipsoide, no una esfera perfecta.</p>
</div>
<div id="geoprocesamiento" class="section level2">
<h2><span class="header-section-number">3.4</span> Geoprocesamiento</h2>
<p>El geoprocesamiento incluye diferentes tareas como buffers y otros, como se ve en <a href="https://qgis.org">QGIS</a></p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" data-line-number="1">knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&quot;figs/geo.png&quot;</span>)</a></code></pre></div>
<p><img src="figs/geo.png" width="288" height="150%" /></p>
<p>Iremos a calcular el buffer de cada centroid, sin embargo, primeros vamos a proyectar nuestros datos para UTM con un usado codigo llamado EPSG (European Petroleum Survey Group), como muestra este blog <a href="https://cafegeodesico.blogspot.com/2011/12/que-son-los-codigos-epsg.html">cafe geodesico</a>. Asi cada provincia podria tener un EPSG diferente, para simplificar este curso, utilizaremos el codigo epsg 5346.</p>
<p>Para transformar nuestros datos, tenemos que:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" data-line-number="1">dft &lt;-<span class="st"> </span><span class="kw">st_transform</span>(cent, <span class="dv">5346</span>)</a>
<a class="sourceLine" id="cb37-2" data-line-number="2">dft</a></code></pre></div>
<pre><code>## Simple feature collection with 23 features and 8 fields
## geometry type:  POINT
## dimension:      XY
## bbox:           xmin: 3879876 ymin: 4569475 xmax: 5331263 ymax: 7419288
## epsg (SRID):    5346
## proj4string:    +proj=tmerc +lat_0=-90 +lon_0=-63 +k=1 +x_0=4500000 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs
## # A tibble: 23 x 9
##    entidad objeto fna   gna   nam   in1   fdc   sag  
##      &lt;int&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
##  1       0 Provi… Ciud… Ciud… Ciud… 02    Geog… IGN  
##  2       0 Provi… del … Prov… Neuq… 58    Geog… IGN  
##  3       0 Provi… de L… Prov… La P… 42    Geog… IGN  
##  4       0 Provi… de M… Prov… Mend… 50    Geog… IGN  
##  5       0 Provi… de S… Prov… San … 74    Geog… IGN  
##  6       0 Provi… de C… Prov… Córd… 14    Geog… IGN  
##  7       0 Provi… de S… Prov… Sant… 82    Geog… IGN  
##  8       0 Provi… de E… Prov… Entr… 30    Geog… IGN  
##  9       0 Provi… de S… Prov… San … 70    Geog… IGN  
## 10       0 Provi… de L… Prov… La R… 46    Geog… IGN  
## # … with 13 more rows, and 1 more variable: geometry &lt;POINT [m]&gt;</code></pre>
<p>Luego, calculamos el buffer, que puede tener una distancia constante, o una distancia variable:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" data-line-number="1">dft_pro &lt;-<span class="st"> </span><span class="kw">st_buffer</span>(<span class="dt">x =</span> dft, <span class="dt">dist =</span> <span class="dv">100000</span>) <span class="co"># 100 km</span></a>
<a class="sourceLine" id="cb39-2" data-line-number="2"><span class="kw">plot</span>(dft_pro<span class="op">$</span>geometry, <span class="dt">axes =</span> T)</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-53-1.png" width="672" /></p>
<p><strong>Macanudo /Bacan / barbaro / Chevere / Da Ora / Splendid / Cool!</strong></p>
<p>Podemos calcular perfectamente un buffer con una distancia variable…..</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" data-line-number="1">dft_pro &lt;-<span class="st"> </span><span class="kw">st_buffer</span>(<span class="dt">x =</span> dft, </a>
<a class="sourceLine" id="cb40-2" data-line-number="2">                     <span class="dt">dist =</span> <span class="kw">rnorm</span>(<span class="dt">n =</span> <span class="kw">nrow</span>(dft), <span class="dt">mean =</span> <span class="dv">100000</span>, <span class="dt">sd =</span> <span class="dv">50000</span>)) <span class="co"># 100 km</span></a>
<a class="sourceLine" id="cb40-3" data-line-number="3"><span class="kw">plot</span>(dft_pro<span class="op">$</span>geometry, <span class="dt">axes =</span> T)</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-54-1.png" width="672" /></p>
<p>Con este grafico hemos ploteado un buffer que tiene un comprimento alteatorio pero con una media de 100 km y un desvio padrao de 50 km, para marcar bien las posibilidades….</p>
<p>Antes de terminar, vamos plotear el area de cada buffer. Como el diametro fue calculado de forma aleatoria, en cada rodada este numero cambia, entonces:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" data-line-number="1">dft_pro<span class="op">$</span>AREA &lt;-<span class="st"> </span><span class="kw">st_area</span>(dft_pro)</a>
<a class="sourceLine" id="cb41-2" data-line-number="2"><span class="kw">plot</span>(dft_pro[<span class="st">&quot;AREA&quot;</span>], <span class="dt">axes =</span> T) <span class="co"># Area em m^2</span></a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-55-1.png" width="672" /></p>
<p>Honestamente, puedes hacer muuuchas cosas.</p>
<p>lo que mas me ha asombrado / shocked / chocado / con sf, es que el processo de gridding de <a href="https://rdrr.io/cran/vein/man/emis_grid.html">VEIN</a> en qgis demoraba 10 minutos, pero usando sf rn R, demora <strong>10 minutos</strong>
Pero ahora vamos a leer datos meteorologicos y climaticos en grillas (RASTER)
(next chpater)</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="impacto-de-las-emisiones-antropogenicas-en-la-calidad-del-aire-y-clima.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="taller-raster-y-cubos-de-datos-vectoriales-aplicacion-de-software-de-informacion-geografica-y-modelado-no-terminado.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ibarraespinosa/UBA/edit/master/03-method.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
